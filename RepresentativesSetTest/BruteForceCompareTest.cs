using System;
using System.Collections.Generic;
using System.Linq;
using CommonLibrary;
using Microsoft.VisualStudio.TestTools.UnitTesting;
using RepresentativesSet;

namespace RepresentativesSetTest
{
    //--------------------------------------------------------------------------------------
    // class BruteForceCompareTest
    //--------------------------------------------------------------------------------------
    [TestClass]
    public class BruteForceCompareTest
    {
        //--------------------------------------------------------------------------------------
        [TestMethod]
        public void BruteForceCompareTestCase1()
        {
            // arrange
            int сardinality = 4;
            int length = 4;
            EnumerateIntegerTrangleForBruteForceRepresentativesCompare enumeration = new EnumerateIntegerTrangleForBruteForceRepresentativesCompare(сardinality, length);
            // act
            enumeration.Execute();
            // assert

        }
        //--------------------------------------------------------------------------------------
        [TestMethod]
        public void BruteForceCompareTestCase2()
        {
            // arrange
            int сardinality = 5;
            int length = 4;
            EnumerateIntegerTrangleForBruteForceRepresentativesCompare enumeration = new EnumerateIntegerTrangleForBruteForceRepresentativesCompare(сardinality, length);
            // act
            enumeration.Execute();
            // assert

        }
        //--------------------------------------------------------------------------------------
        [TestMethod]
        public void BruteForceCompareTestCase3()
        {
            // arrange
            int сardinality = 4;
            int length = 5;
            EnumerateIntegerTrangleForBruteForceRepresentativesCompare enumeration = new EnumerateIntegerTrangleForBruteForceRepresentativesCompare(сardinality, length);
            // act
            enumeration.Execute();
            // assert

        }
        //--------------------------------------------------------------------------------------
        [TestMethod]
        public void BruteForceCompareTestCase4()
        {
            // arrange
            int сardinality = 5;
            int length = 5;
            EnumerateIntegerTrangleForBruteForceRepresentativesCompare enumeration = new EnumerateIntegerTrangleForBruteForceRepresentativesCompare(сardinality, length);
            // act
            enumeration.Execute();
            // assert

        }
        //--------------------------------------------------------------------------------------
        [TestMethod]
        public void BruteForceCompareTestCase5()
        {
            // arrange
            int сardinality = 6;
            int length = 4;
            EnumerateIntegerTrangleForBruteForceRepresentativesCompare enumeration = new EnumerateIntegerTrangleForBruteForceRepresentativesCompare(сardinality, length);
            // act
            enumeration.Execute();
            // assert

        }
        //--------------------------------------------------------------------------------------
        [TestMethod]
        public void BruteForceCompareTestCase6()
        {
            // arrange
            int сardinality = 4;
            int length = 6;
            EnumerateIntegerTrangleForBruteForceRepresentativesCompare enumeration = new EnumerateIntegerTrangleForBruteForceRepresentativesCompare(сardinality, length);
            // act
            enumeration.Execute();
            // assert

        }
        //--------------------------------------------------------------------------------------
        [TestMethod]
        public void BruteForceCompareTestCase7()
        {
            // arrange
            int сardinality = 7;
            int length = 4;
            EnumerateIntegerTrangleForBruteForceRepresentativesCompare enumeration = new EnumerateIntegerTrangleForBruteForceRepresentativesCompare(сardinality, length);
            // act
            enumeration.Execute();
            // assert

        }
        //--------------------------------------------------------------------------------------
        [TestMethod]
        public void BruteForceCompareTestCase8()
        {
            // arrange
            int сardinality = 6;
            int length = 5;
            EnumerateIntegerTrangleForBruteForceRepresentativesCompare enumeration = new EnumerateIntegerTrangleForBruteForceRepresentativesCompare(сardinality, length);
            // act
            enumeration.Execute();
            // assert

        }
        //--------------------------------------------------------------------------------------
        [TestMethod]
        public void BruteForceCompareTestCase9()
        {
            // arrange
            int сardinality = 5;
            int length = 6;
            EnumerateIntegerTrangleForBruteForceRepresentativesCompare enumeration = new EnumerateIntegerTrangleForBruteForceRepresentativesCompare(сardinality, length);
            // act
            enumeration.Execute();
            // assert

        }
        //--------------------------------------------------------------------------------------
        [TestMethod]
        public void BruteForceCompareTestCase10()
        {
            // arrange
            int сardinality = 5;
            int length = 7;
            EnumerateIntegerTrangleForBruteForceRepresentativesCompare enumeration = new EnumerateIntegerTrangleForBruteForceRepresentativesCompare(сardinality, length);
            // act
            enumeration.Execute();
            // assert

        }
        //--------------------------------------------------------------------------------------
        [TestMethod]
        public void BruteForceCompareTestCase11()
        {
            // arrange
            int сardinality = 6;
            int length = 6;
            EnumerateIntegerTrangleForBruteForceRepresentativesCompare enumeration = new EnumerateIntegerTrangleForBruteForceRepresentativesCompare(сardinality, length);
            // act
            enumeration.Execute();
            // assert

        }
        //--------------------------------------------------------------------------------------
        [TestMethod]
        public void BruteForceCompareTestCase12()
        {
            // arrange
            int сardinality = 4;
            int length = 8;
            EnumerateIntegerTrangleForBruteForceRepresentativesCompare enumeration = new EnumerateIntegerTrangleForBruteForceRepresentativesCompare(сardinality, length);
            // act
            enumeration.Execute();
            // assert

        }
        //--------------------------------------------------------------------------------------
        [TestMethod]
        public void BruteForceCompareTestCase13()
        {
            // arrange
            int сardinality = 5;
            int length = 8;
            EnumerateIntegerTrangleForBruteForceRepresentativesCompare enumeration = new EnumerateIntegerTrangleForBruteForceRepresentativesCompare(сardinality, length);
            // act
            enumeration.Execute();
            // assert

        }
        //--------------------------------------------------------------------------------------
        [TestMethod]
        public void BruteForceCompareTestCase14()
        {
            // arrange
            int сardinality = 4;
            int length = 9;
            EnumerateIntegerTrangleForBruteForceRepresentativesCompare enumeration = new EnumerateIntegerTrangleForBruteForceRepresentativesCompare(сardinality, length);
            // act
            enumeration.Execute();
            // assert

        }
        //--------------------------------------------------------------------------------------
        [TestMethod]
        public void BruteForceCompareTestCase15()
        {
            // arrange
            int сardinality = 4;
            int length = 10;
            EnumerateIntegerTrangleForBruteForceRepresentativesCompare enumeration = new EnumerateIntegerTrangleForBruteForceRepresentativesCompare(сardinality, length);
            // act
            enumeration.Execute();
            // assert

        }
        //--------------------------------------------------------------------------------------
        [TestMethod]
        public void BruteForceCompareTestCase16()
        {
            // arrange
            int сardinality = 4;
            int length = 11;
            EnumerateIntegerTrangleForBruteForceRepresentativesCompare enumeration = new EnumerateIntegerTrangleForBruteForceRepresentativesCompare(сardinality, length);
            // act
            enumeration.Execute();
            // assert

            

        }
        //--------------------------------------------------------------------------------------
        [TestMethod]
        public void BruteForceCompareTestCase17()
        {
            // arrange
            int сardinality = 4;
            int length = 12;
            EnumerateIntegerTrangleForBruteForceRepresentativesCompare enumeration = new EnumerateIntegerTrangleForBruteForceRepresentativesCompare(сardinality, length);
            // act
            enumeration.Execute();
            // assert



        }
        //--------------------------------------------------------------------------------------
        [TestMethod]
        public void BruteForceCompareTestCase18()
        {
            // arrange
            int сardinality = 4;
            int length = 13;
            EnumerateIntegerTrangleForBruteForceRepresentativesCompare enumeration = new EnumerateIntegerTrangleForBruteForceRepresentativesCompare(сardinality, length);
            // act
            enumeration.Execute();
            // assert

        }
        //--------------------------------------------------------------------------------------
        [TestMethod]
        public void BruteForceCompareTestCase19()
        {
            // arrange
            int сardinality = 4;
            int length = 15;
            EnumerateIntegerTrangleForBruteForceRepresentativesCompare enumeration = new EnumerateIntegerTrangleForBruteForceRepresentativesCompare(сardinality, length);
            // act
            enumeration.Execute();
            // assert

        }
        //--------------------------------------------------------------------------------------
        [TestMethod]
        public void BruteForceCompareTestCase20()
        {
            // arrange
            int сardinality = 5;
            int length = 9;
            EnumerateIntegerTrangleForBruteForceRepresentativesCompare enumeration = new EnumerateIntegerTrangleForBruteForceRepresentativesCompare(сardinality, length);
            // act
            enumeration.Execute();
            // assert

        }
        //--------------------------------------------------------------------------------------
        [TestMethod]
        public void BruteForceCompareTestCase21()
        {
            // arrange
            int сardinality = 5;
            int length = 10;
            EnumerateIntegerTrangleForBruteForceRepresentativesCompare enumeration = new EnumerateIntegerTrangleForBruteForceRepresentativesCompare(сardinality, length);
            // act
            enumeration.Execute();
            // assert

        }
        //--------------------------------------------------------------------------------------
        [TestMethod]
        public void BruteForceCompareTestCase22()
        {
            // arrange
            int сardinality = 5;
            int length = 11;
            EnumerateIntegerTrangleForBruteForceRepresentativesCompare enumeration = new EnumerateIntegerTrangleForBruteForceRepresentativesCompare(сardinality, length);
            // act
            enumeration.Execute();
            // assert

        }
        //--------------------------------------------------------------------------------------
    }
    //--------------------------------------------------------------------------------------
    // class EnumerateIntegerTrangleForBruteForceRepresentativesCompare
    //--------------------------------------------------------------------------------------
    public class EnumerateIntegerTrangleForBruteForceRepresentativesCompare : EnumerateIntegerTrangle
    {
        private int _fCardinality;
        private List<string> _result = new List<string>();
        //--------------------------------------------------------------------------------------
        public List<string> Result
        {
            get
            {
                return _result;
            }
        }
        //--------------------------------------------------------------------------------------
        public EnumerateIntegerTrangleForBruteForceRepresentativesCompare(int pCardinality, int pLength, int pMinimumValue = 1, int pForwardAdditive = 1)
            : base((1 << pCardinality) - 1, pLength, pMinimumValue, pForwardAdditive)
        {
            _fBreakElement = 0;
            _fCardinality = pCardinality;
        }
        //--------------------------------------------------------------------------------------
        protected override bool MakeAction()
        {
            if (_fCurrentPosition == _fSize - 1)
            {
                // arrange
                int[][] listOfSet = _fCurrentSet.Select(t => BruteForceRepresentatives.GetAsElementNumbers(t, _fCardinality).ToArray()).ToArray();
                BruteForceRepresentatives bruteForce = new BruteForceRepresentatives();
                BruteForceRepresentativesAsTree bruteForceAsTree = new BruteForceRepresentativesAsTree(_fCardinality, listOfSet);

                // act
                List<int> result = bruteForce.ExecuteByBinary(listOfSet);
                bruteForceAsTree.Execute();
                bruteForce.OptimalSets = bruteForce.OptimalSets.OrderBy(s => s).ToList();
                bruteForceAsTree.OptimalSets = bruteForceAsTree.OptimalSets.OrderBy(s => s).ToList();

                // assert
                Assert.AreEqual(bruteForceAsTree.OptimalSets.Count, bruteForce.OptimalSets.Count, "Wrong number rows in result");
                for (int i = 0; i < bruteForceAsTree.OptimalSets.Count; i++)
                {
                    Assert.AreEqual(bruteForceAsTree.OptimalSets[i], bruteForce.OptimalSets[i], $"Wrong string in position {i} - {bruteForceAsTree.OptimalSets[i]}. Expected - {bruteForce.OptimalSets[i]}");
                }
 
            }
            return false;
        }
        //--------------------------------------------------------------------------------------
        protected override bool IsCompleteCondition()
        {
            return base.IsCompleteCondition();
        }
        //--------------------------------------------------------------------------------------
        protected override void PostAction()
        {
        }
        //--------------------------------------------------------------------------------------
    }

}
